<div class="admin-container">
  <div class="header">
    <h1>Products Management</h1>
    <a routerLink="/admin/products/new" class="btn-primary">Add New Product</a>
  </div>

  @if (loading()) {
    <div class="loading">Loading products...</div>
  } @else {
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (product of productsList(); track product.productId) {
            <tr>
              <td>{{ product.productId }}</td>
              <td>{{ product.productName }}</td>
              <td>{{ product.category.name }}</td>
              <td>${{ product.price | number: '1.2-2' }}</td>
              <td>{{ product.stock }}</td>
              <td class="actions">
                <a [routerLink]="['/admin/products', product.productId, 'edit']" class="btn-edit">Edit</a>
                <button (click)="deleteProduct(product.productId)" class="btn-delete">Delete</button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="6" class="empty">No products found</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    @if (total() > 1) {
      <div class="pagination">
        <button
          (click)="goToPage(page() - 1)"
          [disabled]="page() === 0"
          class="btn-page"
        >
          Previous
        </button>
        <span>Page {{ page() + 1 }} of {{ total() }}</span>
        <button
          (click)="goToPage(page() + 1)"
          [disabled]="page() >= total() - 1"
          class="btn-page"
        >
          Next
        </button>
      </div>
    }
  }
</div>

