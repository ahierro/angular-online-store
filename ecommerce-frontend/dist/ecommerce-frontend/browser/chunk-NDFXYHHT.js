import{a as R}from"./chunk-UCRZQELF.js";import{c as N}from"./chunk-FYAUQDTK.js";import{a as T}from"./chunk-3ZSPSCSW.js";import{$ as r,Ja as A,Ka as M,L as d,La as b,M as s,R as _,W as l,Y as p,_ as i,ba as h,ca as C,da as m,ea as S,fa as n,ga as D,ha as c,ia as I,k as x,na as O,pa as P,qa as y,s as f,t as g}from"./chunk-OIPQTPKG.js";import{a as v,b as E}from"./chunk-5MI47NIA.js";function L(a,u){if(a&1){let e=h();i(0,"div",5)(1,"label"),n(2,"Update Status: "),i(3,"select",null,0)(5,"option",6),n(6,"PENDING"),r(),i(7,"option",7),n(8,"APPROVED"),r(),i(9,"option",8),n(10,"REJECTED"),r(),i(11,"option",9),n(12,"CANCELLED"),r(),i(13,"option",10),n(14,"DELIVERED"),r()()(),i(15,"button",11),C("click",function(){f(e);let o=S(4),V=m(2);return g(V.updateStatus(o.value))}),n(16,"Save"),r()()}}function w(a,u){if(a&1&&(i(0,"div",2)(1,"h2"),n(2),r(),i(3,"div",3)(4,"div"),n(5),r(),i(6,"div"),n(7),P(8,"currency"),r(),i(9,"div"),n(10,"Status: "),i(11,"strong"),n(12),r()()(),l(13,L,17,0,"div",4),r()),a&2){let e=u.ngIf,t=m();d(2),c("Order #",e.id,""),d(3),I("User: ",e.username," (",e.email,")"),d(2),c("Total: ",y(8,6,e.total),""),d(5),D(e.status),d(),p("ngIf",t.isAdmin())}}var z=(()=>{class a{constructor(e,t,o){this.route=e,this.api=t,this.auth=o,this.order=_(null)}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");this.api.getPurchaseOrder(e).subscribe(t=>this.order.set(t))}isAdmin(){return this.auth.isAdmin()}updateStatus(e){let t=this.route.snapshot.paramMap.get("id");this.api.patchPurchaseOrder(t,{status:e}).subscribe(()=>{let o=this.order();this.order.set(E(v({},o),{status:e}))})}static{this.\u0275fac=function(t){return new(t||a)(s(N),s(T),s(R))}}static{this.\u0275cmp=x({type:a,selectors:[["app-order-detail"]],standalone:!0,features:[O],decls:1,vars:1,consts:[["st",""],["class","order-detail",4,"ngIf"],[1,"order-detail"],[1,"meta"],["class","admin",4,"ngIf"],[1,"admin"],["value","PENDING"],["value","APPROVED"],["value","REJECTED"],["value","CANCELLED"],["value","DELIVERED"],[3,"click"]],template:function(t,o){t&1&&l(0,w,14,8,"div",1),t&2&&p("ngIf",o.order())},dependencies:[b,A,M],styles:[".order-detail[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.meta[_ngcontent-%COMP%]{display:grid;gap:6px}.admin[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}"]})}}return a})();export{z as OrderDetailComponent};
