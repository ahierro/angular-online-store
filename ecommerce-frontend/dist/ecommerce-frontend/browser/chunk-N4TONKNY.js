import{a as T,c as V,d as O,e as F,f as B,g as L,h as q,k as x,l as R,m as z,n as j,p as G}from"./chunk-OFX54PGD.js";import{a as H}from"./chunk-3ZSPSCSW.js";import{$ as o,Ia as v,Ja as A,Ka as E,L as r,La as D,M as W,R as M,W as C,Y as u,_ as n,ba as b,ca as f,da as I,fa as l,ga as g,ja as m,k as w,ka as p,la as c,na as N,pa as U,qa as k,s as h,t as y}from"./chunk-OIPQTPKG.js";import{a as P,b as S}from"./chunk-5MI47NIA.js";function J(a,_){if(a&1&&(n(0,"option",15),l(1),o()),a&2){let i=_.$implicit;u("ngValue",i.id),r(),g(i.name)}}function K(a,_){if(a&1){let i=b();n(0,"button",16),f("click",function(){h(i);let e=I();return y(e.reset())}),l(1,"Cancel"),o()}}function Q(a,_){if(a&1){let i=b();n(0,"div",17)(1,"div"),l(2),o(),n(3,"div"),l(4),o(),n(5,"div"),l(6),U(7,"currency"),o(),n(8,"div")(9,"button",18),f("click",function(){let e=h(i).$implicit,d=I();return y(d.edit(e))}),l(10,"Edit"),o(),n(11,"button",18),f("click",function(){let e=h(i).$implicit,d=I();return y(d.remove(e))}),l(12,"Delete"),o()()()}if(a&2){let i=_.$implicit;r(2),g(i.productId),r(2),g(i.productName),r(2),g(k(7,3,i.price))}}var oe=(()=>{class a{constructor(i){this.api=i,this.products=M([]),this.categories=M([]),this.form={productId:"",productName:"",productDescription:"",stock:0,price:0,smallImageUrl:"",bigImageUrl:"",categoryId:""},this.editing=!1}ngOnInit(){this.api.getCategoriesPaged({page:0,size:100}).subscribe(i=>this.categories.set(i.content)),this.load()}load(){this.api.getProductsPaged({page:0,size:100}).subscribe(i=>this.products.set(i.content))}save(){this.editing?this.api.updateProduct(this.form.productId,{productName:this.form.productName,productDescription:this.form.productDescription,stock:this.form.stock,price:this.form.price,smallImageUrl:this.form.smallImageUrl,bigImageUrl:this.form.bigImageUrl,categoryId:this.form.categoryId}).subscribe(()=>{this.reset(),this.load()}):this.api.createProduct({productId:this.form.productId,productName:this.form.productName,productDescription:this.form.productDescription,stock:this.form.stock,price:this.form.price,smallImageUrl:this.form.smallImageUrl,bigImageUrl:this.form.bigImageUrl,categoryId:this.form.categoryId}).subscribe(()=>{this.reset(),this.load()})}edit(i){this.form=S(P({},i),{categoryId:i.category?.id??this.form.categoryId}),this.editing=!0}remove(i){confirm("Delete product?")&&this.api.deleteProduct(i.productId).subscribe(()=>this.load())}reset(){this.form={productId:"",productName:"",productDescription:"",stock:0,price:0,smallImageUrl:"",bigImageUrl:"",categoryId:""},this.editing=!1}static{this.\u0275fac=function(s){return new(s||a)(W(H))}}static{this.\u0275cmp=w({type:a,selectors:[["app-product-admin"]],standalone:!0,features:[N],decls:18,vars:12,consts:[[1,"wrap"],[1,"form",3,"ngSubmit"],["placeholder","Product ID","name","productId","required","",3,"ngModelChange","ngModel"],["placeholder","Name","name","productName","required","",3,"ngModelChange","ngModel"],["placeholder","Description","name","productDescription","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Stock","name","stock",3,"ngModelChange","ngModel"],["type","number","placeholder","Price","name","price","step","0.01",3,"ngModelChange","ngModel"],["placeholder","Small Image URL","name","smallImageUrl","required","",3,"ngModelChange","ngModel"],["placeholder","Big Image URL","name","bigImageUrl","required","",3,"ngModelChange","ngModel"],["name","categoryId","required","",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["type","submit"],["type","button",3,"click",4,"ngIf"],[1,"list"],["class","row",4,"ngFor","ngForOf"],[3,"ngValue"],["type","button",3,"click"],[1,"row"],[3,"click"]],template:function(s,e){s&1&&(n(0,"div",0)(1,"h2"),l(2,"Products"),o(),n(3,"form",1),f("ngSubmit",function(){return e.save()}),n(4,"input",2),c("ngModelChange",function(t){return p(e.form.productId,t)||(e.form.productId=t),t}),o(),n(5,"input",3),c("ngModelChange",function(t){return p(e.form.productName,t)||(e.form.productName=t),t}),o(),n(6,"input",4),c("ngModelChange",function(t){return p(e.form.productDescription,t)||(e.form.productDescription=t),t}),o(),n(7,"input",5),c("ngModelChange",function(t){return p(e.form.stock,t)||(e.form.stock=t),t}),o(),n(8,"input",6),c("ngModelChange",function(t){return p(e.form.price,t)||(e.form.price=t),t}),o(),n(9,"input",7),c("ngModelChange",function(t){return p(e.form.smallImageUrl,t)||(e.form.smallImageUrl=t),t}),o(),n(10,"input",8),c("ngModelChange",function(t){return p(e.form.bigImageUrl,t)||(e.form.bigImageUrl=t),t}),o(),n(11,"select",9),c("ngModelChange",function(t){return p(e.form.categoryId,t)||(e.form.categoryId=t),t}),C(12,J,2,2,"option",10),o(),n(13,"button",11),l(14),o(),C(15,K,2,0,"button",12),o(),n(16,"div",13),C(17,Q,13,5,"div",14),o()()),s&2&&(r(4),m("ngModel",e.form.productId),r(),m("ngModel",e.form.productName),r(),m("ngModel",e.form.productDescription),r(),m("ngModel",e.form.stock),r(),m("ngModel",e.form.price),r(),m("ngModel",e.form.smallImageUrl),r(),m("ngModel",e.form.bigImageUrl),r(),m("ngModel",e.form.categoryId),r(),u("ngForOf",e.categories()),r(2),g(e.editing?"Update":"Create"),r(),u("ngIf",e.editing),r(2),u("ngForOf",e.products()))},dependencies:[D,v,A,E,G,L,R,z,T,q,x,V,O,j,B,F],styles:[".wrap[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr) auto auto;gap:8px;align-items:center}.list[_ngcontent-%COMP%]{display:grid;gap:6px}.row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 3fr 1fr auto;gap:8px;background:#fff;padding:8px;border-radius:6px;align-items:center}"]})}}return a})();export{oe as ProductAdminComponent};
