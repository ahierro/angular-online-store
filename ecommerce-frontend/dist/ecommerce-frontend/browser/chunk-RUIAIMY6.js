import{a as k,c as I,d as T,e as N,f as W,g as F,n as O,p as P}from"./chunk-OFX54PGD.js";import{a as D}from"./chunk-3ZSPSCSW.js";import{$ as n,Ia as E,Ja as A,L as r,La as V,M as w,R as S,W as h,Y as y,_ as i,ba as b,ca as l,da as u,fa as d,ga as p,ja as f,k as M,ka as _,la as C,na as x,s as c,t as g}from"./chunk-OIPQTPKG.js";import"./chunk-5MI47NIA.js";function q(a,v){if(a&1){let e=b();i(0,"button",9),l("click",function(){c(e);let t=u();return g(t.reset())}),d(1,"Cancel"),n()}}function B(a,v){if(a&1){let e=b();i(0,"div",10)(1,"div"),d(2),n(),i(3,"div"),d(4),n(),i(5,"div"),d(6),n(),i(7,"div")(8,"button",11),l("click",function(){let t=c(e).$implicit,s=u();return g(s.edit(t))}),d(9,"Edit"),n(),i(10,"button",11),l("click",function(){let t=c(e).$implicit,s=u();return g(s.remove(t))}),d(11,"Delete"),n()()()}if(a&2){let e=v.$implicit;r(2),p(e.id),r(2),p(e.name),r(2),p(e.description)}}var K=(()=>{class a{constructor(e){this.api=e,this.categories=S([]),this.form={id:"",name:"",description:""},this.editing=!1}ngOnInit(){this.load()}load(){this.api.getCategoriesPaged({page:0,size:100}).subscribe(e=>this.categories.set(e.content))}save(){this.editing?this.api.updateCategory(this.form.id,{name:this.form.name,description:this.form.description}).subscribe(()=>{this.reset(),this.load()}):this.api.createCategory({id:this.form.id,name:this.form.name,description:this.form.description}).subscribe(()=>{this.reset(),this.load()})}edit(e){this.form={id:e.id,name:e.name,description:e.description},this.editing=!0}remove(e){confirm("Delete category?")&&this.api.deleteCategory(e.id).subscribe(()=>this.load())}reset(){this.form={id:"",name:"",description:""},this.editing=!1}static{this.\u0275fac=function(m){return new(m||a)(w(D))}}static{this.\u0275cmp=M({type:a,selectors:[["app-category-admin"]],standalone:!0,features:[x],decls:12,vars:6,consts:[[1,"wrap"],[1,"form",3,"ngSubmit"],["placeholder","Id","name","id","required","",3,"ngModelChange","ngModel"],["placeholder","Name","name","name","required","",3,"ngModelChange","ngModel"],["placeholder","Description","name","description","required","",3,"ngModelChange","ngModel"],["type","submit"],["type","button",3,"click",4,"ngIf"],[1,"list"],["class","row",4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"row"],[3,"click"]],template:function(m,t){m&1&&(i(0,"div",0)(1,"h2"),d(2,"Categories"),n(),i(3,"form",1),l("ngSubmit",function(){return t.save()}),i(4,"input",2),C("ngModelChange",function(o){return _(t.form.id,o)||(t.form.id=o),o}),n(),i(5,"input",3),C("ngModelChange",function(o){return _(t.form.name,o)||(t.form.name=o),o}),n(),i(6,"input",4),C("ngModelChange",function(o){return _(t.form.description,o)||(t.form.description=o),o}),n(),i(7,"button",5),d(8),n(),h(9,q,2,0,"button",6),n(),i(10,"div",7),h(11,B,12,3,"div",8),n()()),m&2&&(r(4),f("ngModel",t.form.id),r(),f("ngModel",t.form.name),r(),f("ngModel",t.form.description),r(2),p(t.editing?"Update":"Create"),r(),y("ngIf",t.editing),r(2),y("ngForOf",t.categories()))},dependencies:[V,E,A,P,F,k,I,T,O,W,N],styles:[".wrap[_ngcontent-%COMP%]{padding:16px;display:grid;gap:12px}.form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 2fr auto auto;gap:8px;align-items:center}.list[_ngcontent-%COMP%]{display:grid;gap:6px}.row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 2fr auto;gap:8px;background:#fff;padding:8px;border-radius:6px;align-items:center}"]})}}return a})();export{K as CategoryAdminComponent};
